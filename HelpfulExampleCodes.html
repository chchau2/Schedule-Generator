<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schedule Generator</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    td {
      border: 1px solid #000000;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      position: relative;
    }
    .color-cell {
      background-color: lightgray;
    }
    .empty-cell {
      background-color: white;
    }
  </style>
</head>
<body>
  <h1>Staff Schedule</h1>
  <table id="staffTable" border="1">
    <tr>
      <th class='color-cell' style="color: white; background-color: #431843">Chris</th>
      <th class='color-cell' style="color: black; background-color: #74cb60">Janice</th>
      <th class='color-cell' style="color: black; background-color: #9dc4de">Natalie</th>
      <th class='color-cell' style="color: black; background-color: #e3863a">Meg</th>
      <th class='color-cell' style="color: black; background-color: #cb9fd3">Christine</th>
      <th class='color-cell' style="color: white; background-color: #bb2222">Abraham</th>
      <th class='color-cell' style="color: white; background-color: #28356c">Vicki</th>
      <th class='color-cell' style="color: black; background-color: #f3f361">HK</th>
      <th class='color-cell' style="color: black; background-color: white">CLEAR</th>

    </tr>
  </table>

  <h1>Week 1</h1>
  <table id="toggleTable" border="1">
    <tr>
      <th></th>
      <th>Sunday</th>
      <th>Monday</th>
      <th>Tuesday</th>
      <th>Wednesday</th>
      <th>Thursday</th>
      <th>Friday</th>
      <th>Saturday</th>
    </tr>
  </table>
  
  <script>
    // Initialize variables
    let selectedColor = null;

    // Function to get the start of the current week (Sunday)
    function getStartOfWeek(date) {
      let day = date.getDay(),
          diff = date.getDate() - day; // Get the difference from Sunday
      return new Date(date.setDate(diff));
    }

    // Get the start of the current week (Sunday)
    let currentDate = new Date();
    let startOfWeek = getStartOfWeek(new Date(currentDate));
    
    // Define day names and the corresponding date numbers
    const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    const tableHeaders = document.querySelectorAll("#toggleTable th");

    // Loop through the days of the week and set day names + date in the headers
    tableHeaders.forEach((th, index) => {
      if (index > 0) { // Skip the first header (empty cell)
        let dayOffset = index - 1; // Index 1 corresponds to Sunday, 2 to Monday, etc.
        let dayDate = new Date(startOfWeek);
        dayDate.setDate(startOfWeek.getDate() + dayOffset); // Calculate the date for the current day
        
        // Create a variable with day name and date
        let dayHeader = `${dayNames[index - 1]} ${dayDate.getDate()}`;
        
        // Update the <th> with the generated variable
        th.textContent = dayHeader; // Insert the variable content into the <th>
      }
    });

    // Generate the table dynamically
    const table = document.getElementById("toggleTable");
    const rows = 7; // Number of rows
    const cols = 8; // Number of columns (1 for time label, 7 for the days)

    for (let i = 0; i < rows; i++) {
      const row = table.insertRow(); // Create a new row
      for (let j = 0; j < cols; j++) {
        const cell = row.insertCell();
        if (j == 0) {
          if (i == 0) cell.textContent = '9am - 5pm';
          else if (i == 1) cell.textContent = 'HK';
          else if (i == 2) cell.textContent = '1pm - 9pm';
          else if (i == 3) cell.textContent = 'MID Shift';
          else if (i == 4) cell.textContent = 'NOTES:';
          else if (i == 5) cell.textContent = 'Janice';
          else if (i == 6) cell.textContent = 'Chris';
        } else {
          // Assign class for styling
          cell.classList.add('empty-cell');
        }
      }
    }

    // Event listener for static color table (staffTable)
    document.getElementById('staffTable').addEventListener('click', function(event) {
      const cell = event.target;
      
      // Check if the clicked cell is a color cell and get its background color
      if (cell.classList.contains('color-cell')) {
        selectedColor = cell.style.backgroundColor;
        console.log("Selected color:", selectedColor); // For debugging
      }
    });

    // Event listener for dynamic table (toggleTable) cell clicks
    document.getElementById('toggleTable').addEventListener('click', function(event) {
      const cell = event.target;
      
      // If the clicked cell is empty, apply the selected color to it
      if (cell.classList.contains('empty-cell') && selectedColor) {
        cell.style.backgroundColor = selectedColor; // Apply selected color to the cell
      }
    });
  </script>
</body>
</html>
